{% extends "base.html" %}

{% block content %}
    <!-- navbar -->
    {% include "navbar.html" %}

    <!-- main content -->
    <main class="flex-grow self-center mt-10 mb-12 px-5 w-full max-w-6xl">
        <!-- header -->
        <div class="flex flex-wrap justify-between items-center gap-3 mb-6">
            <h2 class="font-bold text-2xl">Opportunities</h2>
        </div>

        <!-- search and filter bar -->
        <div
                class="flex sm:flex-row flex-col sm:justify-between sm:items-center gap-3 bg-white shadow-sm p-4 border border-gray-200 rounded-lg"
        >
            <div class="relative flex-1">
                <input
                        type="text"
                        placeholder="Search opportunities"
                        class="p-3 pl-10 border border-gray-300 focus:border-utdOrange/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-utdOrange/50 w-full transition"
                />
                <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="top-3.5 left-3 absolute w-5 h-5 text-gray-400"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                >
                    <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"
                    />
                </svg>
            </div>

            <div class="flex gap-3 w-full sm:w-auto">
                <!-- category select -->
                <select
                        class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-utdOrange/50 w-full sm:w-48 transition"
                >
                    <option value="">All Categories</option>
                    <option>Internships</option>
                    <option>Research</option>
                    <option>Scholarships</option>
                    <option>On-Campus Jobs</option>
                </select>

                <!-- sort by -->
                <select
                        class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-utdOrange/50 w-full sm:w-40 transition"
                >
                    <option value="">Sort By</option>
                    <option>Date (Newest)</option>
                    <option>Date (Oldest)</option>
                </select>
            </div>
        </div>

        <!-- opportunity card -->
        {% if opportunities %}
            <div class="gap-6 grid sm:grid-cols-2 lg:grid-cols-3 mt-8">
                {% for opp in opportunities %}
                    <div
                            class="bg-white shadow-md hover:shadow-lg border border-gray-100 rounded-xl overflow-hidden transition duration-300"
                    >
                        <img
                                src="{{ opp.opp_image_url }}"
                                alt="{{ opp.title }}"
                                class="w-full object-cover aspect-video"
                        />
                        <div class="p-4">
                            <a href="{{ url_for("opportunity_details", opp_id=opp.opp_id) }}">
                                <h3 class="font-semibold text-gray-800 text-lg truncate hover:underline hover:text-gray-900 transition-colors">{{ opp.title }}</h3>
                            </a>
                            <div class="flex justify-between items-center mt-1">
                                <a href="{{ url_for("organization_details", org_id=opp.org_id) }}"
                                   class="truncate max-w-3/5">
                                    <p class="text-gray-700 text-sm truncate hover:underline hover:text-gray-900 transition-colors pr-4">{{ opp.org_name }}</p>
                                </a>
                                <div class="max-w-2/5">
                                    <p class="bg-orange-200 px-3 py-2 rounded-2xl text-gray-800 text-xs truncate text-center">{{ opp.category.replace("_", " ").title() }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <h3 class="font-lg text-gray-700 mt-10">No opportunities found</h3>
        {% endif %}
    </main>

    <!-- footer -->
    {% include "footer.html" %}

{% endblock content %}
